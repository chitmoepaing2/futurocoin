"use strict";!function(n){var a,r,s={api:"//newsroom.futurocoin.com/wp-json/wp/v2/posts",prepareData:function(e){return e.map(function(e){return{title:t.removeHtmlTags(e.title.rendered),date:e.date,link:e.link,content:t.truncateText(e.excerpt.rendered,150),imageApi:e._links["wp:featuredmedia"][0].href}})}},i={prepareData:function(e){return{url:e.guid.rendered}}},t={removeHtmlTags:function(e){return n("<div>").html(e).text()},truncateText:function(e,n){return this.removeHtmlTags(e).substring(0,n).split(" ").slice(0,-1).join(" ")+"..."}},o={wrapper:n(".js-news"),container:n(".js-news-container"),newsTemplate:n(".js-news-container .js-news-template"),buttonMore:n(".js-news .js-news--button-more")},u={newsCurrentPage:1,newsPerPage:3},p=(a=function(t,e){n.ajax({type:"GET",url:e,success:function(e){var n=i.prepareData(e);t.attr("src",n.url),t.on("load",function(){t.addClass("news__image--loaded")})}})},r=function(){var e={per_page:u.newsPerPage,page:u.newsCurrentPage+1};n.ajax({type:"GET",url:s.api+"?"+n.param(e),error:function(e){400===e.status&&o.wrapper.find(".js-news--button-more").addClass("hidden")}})},{preloadNews:function(){var e={per_page:u.newsPerPage,page:u.newsCurrentPage};n.ajax({type:"GET",url:s.api+"?"+n.param(e),success:function(e){var n,t=s.prepareData(e);n=t.map(function(e){var n=o.newsTemplate.clone().removeClass("js-news-template").find("[data-news-title]").text(e.title).end().find("[data-news-url]").attr("href",e.link).end().find("[data-news-date]").text(moment(e.date).format("D MMM YYYY")).end().find("[data-news-content]").text(e.content).end();return a(n.find("[data-news-image]"),e.imageApi),n}),o.container.append(n),r(),u.newsCurrentPage+=1}})}});n(document).ready(function(){0!==o.wrapper.length&&(o.buttonMore.on("click",function(e){p.preloadNews(),e.preventDefault()}),p.preloadNews())})}(jQuery);