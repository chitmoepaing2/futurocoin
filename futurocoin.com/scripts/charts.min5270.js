"use strict";!function(n){var t,o,r={yobit:{api:"//api.blockchain24.co/fto/data",label:"Yobit price (USD)",prepareData:function(a){return a.data.map(function(a){return{value:a.price,label:moment.utc(a.updated_at).local().format("HH:mm"),volume:a.vol}})}},southxchange:{api:"//api.blockchain24.co/fto/data/southx",label:"SouthXchange price (USD)",prepareData:function(a){return a.data.map(function(a){return{value:a.price,label:moment.utc(a.updated_at).local().format("HH:mm"),volume:a.vol}})}},coindeal:{api:"//api.blockchain24.co/fto/data/coindeal",label:"Coindeal price (USD)",prepareData:function(a){return a.data.map(function(a){return{value:a.price,label:moment.utc(a.updated_at).local().format("HH:mm"),volume:a.vol}})}}},e=Object.keys(r),a=e[0],l=new Chart(n("#market-performance-chart"),{type:"line",data:{yobit:{labels:[],datasets:[{fill:!1,borderColor:"#0198D0",backgroundColor:"#0198D0",data:[]}]},southxchange:{labels:[],datasets:[{fill:!1,borderColor:"#0198D0",backgroundColor:"#0198D0",data:[]}]}}[a],options:{responsive:!0,maintainAspectRatio:!1,tooltips:{mode:"index",intersect:!1},elements:{line:{tension:1e-6}},plugins:{filler:{propagate:!1}},scales:{yAxes:[{ticks:{beginAtZero:!1}}]}}}),i=function(a,t){l.data.datasets[0].data=[],l.data.labels=[],l.data.datasets[0].label=r[t].label,a.forEach(function(a){c(a)}),l.update()},c=function(a){a.value=Number(a.value).toFixed(2),l.data.datasets[0].data.push(a.value),l.data.labels.push(a.label)},u=function(a,t){var e=a,o={value:a,currency:t,unit:""};return["","K","M","G"].some(function(a){if(e<1)return!0;o.value=e,o.unit=a,e/=1e3}),o.currency+Number(o.value).toFixed(2)+o.unit},p=function(o){n.ajax({type:"GET",url:r[o].api,success:function(a){var t=r[o].prepareData(a),e=t[t.length-1];i(t,o),n("[data-fto-price]").text(u(e.value,"$")),n("[data-fto-volume]").text(u(e.volume,"$"))},error:function(){var a=r[o].prepareData({data:[]});a[a.length-1];i(a,o),n("[data-fto-price]").text(u(0,"$")),n("[data-fto-volume]").text(u(0,"$"))}})};p(a),n(".js-tabs").on("click","[data-chart-display]",function(){var a=n(this).data("chart-display");-1!==e.indexOf(a)&&p(a)}),t=0,o=function(a){t<a&&(t=a),n(".js-header-price").text(u(t,"$"))},["yobit","coindeal"].forEach(function(e){r[e]&&r[e].api&&n.ajax({type:"GET",url:r[e].api,success:function(a){var t=r[e].prepareData(a).pop().value;o(t)},error:function(){o(0)}})})}(jQuery);